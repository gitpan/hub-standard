<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Hub::Data::DBTable</title>
<link rel="stylesheet" href="../../pod.css" type="text/css" />
<link rev="made" href="mailto:gerrit@familiehaase.de" />
</head>

<body>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#methods">METHODS</a></li>
	<li><a href="#internal">INTERNAL</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#updated">UPDATED</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Hub::Data::DBTable - Wrapper for DBI (expecting a MySQL backend)</p>
<p>Part of the <a href="../../hublib.html">Hub Library</a></p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
    use Hub qw(:standard);
    my $user = mkinst( 'DBTable', 'user' );
    $user-&gt;select( -cmd =&gt; 'get_admin_user' );</pre>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This is implemented for access to a database which is defined by</p>
<pre>
    /sys/dbi/connect/dsn
    /sys/dbi/connect/user
    /sys/dbi/connect/clave</pre>
<p>And supported by files</p>
<pre>
    db-struct.hf
    db-commands.hf</pre>
<p>Which make it pretty specific to a runtime web application ;)</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="methods">METHODS</a></h1>
<table><tr><td>
<a class="methlink" href="#item_do">do</a></td><td>
<a class="methlink" href="#item_new">new</a></td><td>
<a class="methlink" href="#item_select">select</a></td><td>
<a class="methlink" href="#item_update">update</a></td></tr><tr><td>
<a class="methlink" href="#item_insert">insert</a></td><td>
<a class="methlink" href="#item_refresh">refresh</a></td><td>
<a class="methlink" href="#item_select_all">select_all</a></td></tr></table><dl>
<dt><strong><a name="item_do">do</a></strong><br />
</dt>
<dd>
<strong>Execute an SQL query</strong>
</dd>
<dd>
<pre>
 Usage: do [options]
 Usage: do query</pre>
</dd>
<dd>
<p>Uses the same -cmd and -data processing as <a href="#item_select">select</a></p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_insert">insert</a></strong><br />
</dt>
<dd>
<strong>Insert a record</strong>
</dd>
<dd>
<pre>
 Usage: insert -data =&gt; \%hash, [options]</pre>
</dd>
<dd>
<p>options:
  -nonull Convert undefined (NULL) values to ''
  -forcenull  Convert empty ('') values to undefined (NULL)</p>
</dd>
<dd>
<p>Where the keys of the data hash match the column names.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_new">new</a></strong><br />
</dt>
<dd>
<strong>Constructor.</strong>
</dd>
<dd>
<pre>
 Usage: new LIST</pre>
</dd>
<dd>
<p>Parameters are passed to the standard initialization method <a href="#item_refresh">refresh</a>.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_refresh">refresh</a></strong><br />
</dt>
<dd>
<strong>Return instance to initial state.</strong>
</dd>
<dd>
<pre>
 Usage: refresh LIST</pre>
</dd>
<dd>
<p>Called implictly by <a href="#item_new">new</a>, and when persistent interpreters (such as
mod_perl) would have called <a href="#item_new">new</a>.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_select">select</a></strong><br />
</dt>
<dd>
<strong>Select records from the table</strong>
</dd>
<dd>
<pre>
 Usage: select [options]
 Usage: select query</pre>
</dd>
<dd>
<p>OPTIONS</p>
</dd>
<dd>
<pre>
  -cmd        The command (which is read from db-commands.hf)
  -data       The data used to populate the query</pre>
</dd>
<dd>
<p>Using the -cmd option allows you to store your SQL queries in the external
file ``db-commands.hf'' rather than passing in the query.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_select_all">select_all</a></strong><br />
</dt>
<dd>
<strong>Select all columns from a table</strong>
</dd>
<dd>
<pre>
 Usage: select_all -by =&gt; \@columns, -using =&gt; \%column_to_value_hash
 Usage: select_all [options]</pre>
</dd>
<dd>
<p>In the first form:</p>
</dd>
<dd>
<pre>
  -by =&gt; [ &quot;pkey&quot; ], -using =&gt; { pkey =&gt; 1001 }</pre>
</dd>
<dd>
<p>Will build the where clause by extracing the key/val from ``-using'' for each
column name in ``-by''.</p>
</dd>
<dd>
<p>Or, each option is a WHERE condition.  For instance, the option:</p>
</dd>
<dd>
<pre>
  -pkey =&gt; 1001</pre>
</dd>
<dd>
<p>Would add ``WHERE pkey = '1001''' to the select query.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_update">update</a></strong><br />
</dt>
<dd>
<strong>Update an existion record</strong>
</dd>
<dd>
<pre>
 Usage: update -by =&gt; \@names, -set =&gt; \@names, -using =&gt; \%data, [options]</pre>
</dd>
<dd>
<p>where:
  -by     Column names for the WHERE clause
  -set    Column names for the SET clause (otherwise all columns)
  -using  Data for -by and -set clauses
options:
  -nonull     Convert undefined (NULL) values to ''
  -forcenull  Convert empty ('') values to undefined (NULL)</p>
</dd>
<p></p></dl>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="internal">INTERNAL</a></h1>
<table><tr><td>
<a class="methlink" href="#item_destroy">DESTROY</a></td><td>
<a class="methlink" href="#item__esc">_esc</a></td></tr></table><dl>
<dt><strong><a name="item_destroy">DESTROY</a></strong><br />
</dt>
<dd>
<strong>Called implicitly by the framework.</strong>
</dd>
<dd>
<p>Disconnect nicely.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item__esc">_esc</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<p></p></dl>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Ryan Gies</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (c) 2006 Livesite Networks, LLC.  All rights reserved.</p>
<p>Copyright (c) 2000-2005 Ryan Gies.  All rights reserved.</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="updated">UPDATED</a></h1>
<p>This file created by  on  at</p>
<p><a href="#__index__"><small>Top</small></a></p>

</body>

</html>
