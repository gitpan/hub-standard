<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Hub::Data::File</title>
<link rel="stylesheet" href="../../pod.css" type="text/css" />
<link rev="made" href="mailto:gerrit@familiehaase.de" />
</head>

<body>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#methods">METHODS</a></li>
	<li><a href="#internal">INTERNAL</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#updated">UPDATED</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Hub::Data::File -</p>
<p>Part of the <a href="../../hublib.html">Hub Library</a></p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="methods">METHODS</a></h1>
<table><tr><td>
<a class="methlink" href="#item_chperm">chperm</a></td><td>
<a class="methlink" href="#item_fileopen">fileopen</a></td><td>
<a class="methlink" href="#item_find">find</a></td><td>
<a class="methlink" href="#item_mkdiras">mkdiras</a></td><td>
<a class="methlink" href="#item_rmdirrec">rmdirrec</a></td></tr><tr><td>
<a class="methlink" href="#item_cpdir">cpdir</a></td><td>
<a class="methlink" href="#item_filescan">filescan</a></td><td>
<a class="methlink" href="#item_find_files">find_files</a></td><td>
<a class="methlink" href="#item_mvfile">mvfile</a></td><td>
<a class="methlink" href="#item_rmfile">rmfile</a></td></tr><tr><td>
<a class="methlink" href="#item_cpfile">cpfile</a></td><td>
<a class="methlink" href="#item_filetest">filetest</a></td><td>
<a class="methlink" href="#item_getcrown">getcrown</a></td><td>
<a class="methlink" href="#item_parsefile">parsefile</a></td><td>
<a class="methlink" href="#item_safefn">safefn</a></td></tr><tr><td>
<a class="methlink" href="#item_fileclose">fileclose</a></td><td>
<a class="methlink" href="#item_filetime">filetime</a></td><td>
<a class="methlink" href="#item_listfiles">listfiles</a></td><td>
<a class="methlink" href="#item_readfile">readfile</a></td><td>
<a class="methlink" href="#item_writefile">writefile</a></td></tr></table><dl>
<dt><strong><a name="item_chperm">chperm</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: chperm PATH OPTIONS</pre>
</dd>
<dd>
<p>Change permissions of a file or directory</p>
</dd>
<dd>
<p>OPTIONS</p>
</dd>
<dd>
<pre>
  {
      # see find and cpdir</pre>
</dd>
<dd>
<pre>
      'recperms'   =&gt; 1,       # will recurse if PATH is a directory</pre>
</dd>
<dd>
<pre>
  }</pre>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_cpdir">cpdir</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: cpdir SOURCE_DIR, TARGET_DIR, [OPTIONS]</pre>
</dd>
<dd>
<p>Copy a directory.  Files are only copied when the source file's modified time
is newer (unless the 'force' option is set).</p>
</dd>
<dd>
<pre>
 SOURCE_DIR    SCALAR, Source directory</pre>
</dd>
<dd>
<pre>
 TARGET_DIR    SCALAR, Destination *parent* directory</pre>
</dd>
<dd>
<pre>
 OPTIONS       HASHREF, Options:</pre>
</dd>
<dd>
<pre>
              {
                  include =&gt; [ &quot;.*&quot; ],
                  ignore  =&gt; [ &quot;CVS&quot;, &quot;\.cvsignore&quot;, &quot;README&quot; ],
                  force   =&gt; 1,</pre>
</dd>
<dd>
<pre>
                  uid     =&gt; Hub::getuid( &quot;username&quot; ),    # user id
                  gid     =&gt; Hub::getgid( &quot;username&quot; ),    # group id</pre>
</dd>
<dd>
<pre>
                  dmode   =&gt; 0775,
                  fmode   =&gt; {            # fmode can ref a hash of extensions
                      '*'     =&gt; 0644,    # '*' is used for unmatched
                      'cgi'   =&gt; 0755,    # specific cgi file extension
                      'dll'   =&gt; &quot;SKIP&quot;,  # do not update dll files
                  }
                  fmode   =&gt; 0655,        # or, fmode can be used for all files</pre>
</dd>
<dd>
<pre>
              }</pre>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_cpfile">cpfile</a></strong><br />
</dt>
<dd>
<strong>Copy a file and apply permissions and mode</strong>
</dd>
<dd>
<pre>
 Usage: cpfile $SOURCE, $TARGET, [\%PERMISSIONS], [OPTIONS]</pre>
</dd>
<dd>
<p>Where:</p>
</dd>
<dd>
<pre>
  $SOURCE         File to be copied
  $TARGET         Target path (file or directory)
  \%PERMISSIONS   Permission hash (see Hub::chperm)
  OPTIONS         -newer      Only copy when the source is newer (mtime) than
                              the target</pre>
</dd>
<dd>
<p>See also: <a href="#item_chperm">chperm</a></p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_fileclose">fileclose</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: fileclose HANDLE, [FILENAME]</pre>
</dd>
<dd>
<p>Unlock and close the file.</p>
</dd>
<dd>
<p>Always remove the lockfile for a specified filename.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_fileopen">fileopen</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: fileopen FILENAME [PARAMS]</pre>
</dd>
<dd>
<p>For platforms which don't flock, create a lockfile for a specified
filename.  Waits for #winlock_timeout seconds if a lockfile exists (unless
READONLY is specified).</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_filescan">filescan</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: filescan PATH, [PATH] ...</pre>
</dd>
<dd>
<p>Clear the list of recognized files, then find all nodes in the specified
<code>path(s)</code> and mark them as existing.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_filetest">filetest</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: filetest PATH
 Usage: filetest PATH TEST</pre>
</dd>
<dd>
<p>Returns 1 if PATH is an element which we recognize as existing on disk.  The
idea behind this logic is that it is faster to build a list of existing files
once then check the list as the program progresses, than it is to make the -e,
-f and -d perl calls.  The frequency with which the list of known files is
updated is left to user configuration. (see filescan)</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_filetime">filetime</a></strong><br />
</dt>
<dd>
<strong>Return file's timestamp</strong>
</dd>
<dd>
<pre>
 Usage: filetime LIST, [OPTIONS]</pre>
</dd>
<dd>
<p>Where:</p>
</dd>
<dd>
<pre>
  LIST                A list of valid path names or file handles
  OPTIONS -mtime      Return last-modified time (default)
          -atime       last-accessed time
          -ctime       creation time
  OPTIONS -max        Return greatest value (default)
          -min         least value</pre>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_find">find</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: find DIRECTORY, OPTIONS</pre>
</dd>
<dd>
<pre>
 DIRECTORY     SCALAR, Can be an absolute or relative path.</pre>
</dd>
<dd>
<pre>
 OPTIONS       HASH {
                  ignore_path  =&gt; [ &quot;CVS&quot;, ],
                  ignore       =&gt; [ &quot;.cvsignore$&quot; ],
                  include      =&gt; [ &quot;pl$&quot;, &quot;pm$&quot; ],
                  filesonly    =&gt; 0,
              }</pre>
</dd>
<dd>
<pre>
 RETURNS       ARRAY</pre>
</dd>
<dd>
<pre>
 NOTES         . and .. are always ignored.</pre>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_find_files">find_files</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<p>Hub::find_files( $directory )</p>
</dd>
<dd>
<p>$directory can be absolute or relative.  Trim the trailing slash before
calling this method.</p>
</dd>
<dd>
<p>Example:</p>
</dd>
<dd>
<pre>
  Hub::find_files( '/var' );</pre>
</dd>
<dd>
<p>Returns and array of:</p>
</dd>
<dd>
<pre>
  /var/log/lastlog
  /var/log/setup.log
  /var/log/setup.log.full
  /var/log/sshd.log
  /var/log/wtmp
  /var/run/sshd.pid
  /var/run/utmp</pre>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_getcrown">getcrown</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: getcrown</pre>
</dd>
<dd>
<p>Return the first line of a file</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_listfiles">listfiles</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: listfiles</pre>
</dd>
<dd>
<p>List files in a directory.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_mkdiras">mkdiras</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: mkdiras</pre>
</dd>
<dd>
<p>Make a directy with specified permissions</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_mvfile">mvfile</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: mvfile</pre>
</dd>
<dd>
<p>Move (rename) a file</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_parsefile">parsefile</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: parsefile FILENAME, [DATA], [OPTIONS]</pre>
</dd>
<dd>
<pre>
 FILENAME:     File to parse as a template.</pre>
</dd>
<dd>
<pre>
 [DATA]:       Hashref of name/value pairs.</pre>
</dd>
<dd>
<p>[OPTIONS]:</p>
</dd>
<dd>
<pre>
  -sdref      Return a scalar copy (not a reference)
  -alone      Do not include configuration and instance values
  -inline     Update the template on disk!</pre>
</dd>
<dd>
<p>Populate a file with runtime data.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_readfile">readfile</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: readfile PATH</pre>
</dd>
<dd>
<p>Read and return the contents of a file.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_rmdirrec">rmdirrec</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: rmdirrec TARGET_DIR</pre>
</dd>
<dd>
<p>Recursively remove a directory.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_rmfile">rmfile</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: rmfile</pre>
</dd>
<dd>
<p>We rely on server security and file permissions to prevent tamperring.</p>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_safefn">safefn</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: safefn EXPR</pre>
</dd>
<dd>
<p>Create a name which is safe for using as a filename.</p>
</dd>
<dd>
<p><strong>Example: This example</strong>:</p>
</dd>
<dd>
<pre>
    safefn( 'alsk/lsdkfj' );</pre>
</dd>
<dd>
<p><strong>matches</strong>:</p>
</dd>
<dd>
<pre>
    alsk_2f_lsdkfj</pre>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item_writefile">writefile</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<dd>
<pre>
 Usage: writefile FILEPATH, CONTENTS, [FLAGS]</pre>
</dd>
<dd>
<p>Write CONTENTS to FILEPATH which is openned with FLAGS.  Default FLAGS is '&gt;'.</p>
</dd>
<dd>
<p>Sets the correct file permissions.</p>
</dd>
<p></p></dl>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="internal">INTERNAL</a></h1>
<table><tr><td>
<a class="methlink" href="#item__chperm">_chperm</a></td><td>
<a class="methlink" href="#item__chperm_normal">_chperm_normal</a></td><td>
<a class="methlink" href="#item__chperm_win32">_chperm_win32</a></td></tr></table><dl>
<dt><strong><a name="item__chperm">_chperm</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item__chperm_normal">_chperm_normal</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<p></p></dl>
<dl>
<dt><strong><a name="item__chperm_win32">_chperm_win32</a></strong><br />
</dt>
<dd>
<strong></strong>
</dd>
<p></p></dl>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Ryan Gies</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright (c) 2006 Livesite Networks, LLC.  All rights reserved.</p>
<p>Copyright (c) 2000-2005 Ryan Gies.  All rights reserved.</p>
<p>
<a href="#__index__"><small>Top</small></a>
</p>
<hr />
<h1><a name="updated">UPDATED</a></h1>
<p>This file created by mkdocs.pl on 8/29/2006 at 2:07pm</p>
<p><a href="#__index__"><small>Top</small></a></p>

</body>

</html>
